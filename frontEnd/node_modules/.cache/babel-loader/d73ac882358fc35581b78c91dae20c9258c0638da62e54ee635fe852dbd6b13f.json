{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport * as d3 from 'd3';\nimport circleJson2 from '../../../backEnd/data/circul_2.json';\nimport circleJson3 from '../../../backEnd/data/circul_3.json';\nimport circleJson4 from '../../../backEnd/data/circul_4.json';\nimport circleJson5 from '../../../backEnd/data/circul_5.json';\nexport default {\n  name: 'view3_3',\n  data() {\n    return {\n      chartValue: {\n        k: 5\n      },\n      chartConfig: {\n        ringColor: ['#2ca25f', '#fdae6b', '#3182bd', '#756bb1', '#636363', '#f03b20'],\n        circleColor: '#99ccff',\n        arcColor: 'blue',\n        outerRadius: [40, 50, 60, 70, 80, 90],\n        innerRadius: [35, 45, 55, 65, 75, 85],\n        circleRadius: 30,\n        arcRadius: 22\n      }\n    };\n  },\n  methods: {\n    creatRingChart(idx) {\n      const that = this;\n      let fileName;\n      switch (idx) {\n        case 2:\n          {\n            fileName = circleJson2;\n            break;\n          }\n        case 3:\n          {\n            fileName = circleJson3;\n            break;\n          }\n        case 4:\n          {\n            fileName = circleJson4;\n            break;\n          }\n        case 5:\n          {\n            fileName = circleJson5;\n            break;\n          }\n      }\n      const ringData = that.getCircleData(fileName);\n      const main = d3.select('.container33 svg').append('g').classed('main', true).attr('transform', 'translate(' + 100 + ',' + 100 + ')');\n      const views = main.append('g').classed('views', true);\n      views.selectAll('g').data(ringData).enter().append('g').attr('class', function (d, i) {\n        return 'view' + (i + 1);\n      });\n      for (let k = 0; k < 5; k++) {\n        // 5将来合图的时候要换\n        const value = ringData[k];\n        let view = views.select('.view' + (k + 1));\n        view = main.append('g').attr('transform', 'translate(' + 0 + ',' + 150 * k + ')');\n        const circle = view.append('circle');\n        circle.attr('cx', 0).attr('cy', 0).attr('r', that.chartConfig.circleRadius).attr('fill', that.chartConfig.circleColor);\n        // 设置扇形原点位置,本质是将画笔g移到该有的位置\n        const innerArcRight = view.append('g').attr('transform', 'translate(' + 2 + ',' + 0 + ')');\n        const arcsRight = d3.arc().outerRadius(that.chartConfig.arcRadius).innerRadius(0).startAngle(Math.PI).endAngle(Math.PI * (1 - value.rightCircle));\n        const arcRight = innerArcRight.append('path').attr('d', arcsRight);\n        arcRight.attr('fill', that.chartConfig.arcColor);\n        const innerArcLeft = view.append('g').attr('transform', 'translate(' + -2 + ',' + 0 + ')');\n        const arcsLeft = d3.arc().outerRadius(that.chartConfig.arcRadius).innerRadius(0).startAngle(Math.PI).endAngle(Math.PI * (value.leftCircle + 1));\n        const arcLeft = innerArcLeft.append('path').attr('d', arcsLeft);\n        arcLeft.attr('fill', 'blue');\n        const arcs = view.append('g').classed('arcs', true);\n        arcs.selectAll('g').data(value.proportions).enter().append('g').attr('class', function (d, i) {\n          return 'arc' + (i + 1);\n        });\n        for (let i = 0; i < value.proportionLength; i++) {\n          let arc = arcs.select('.arc' + (i + 1));\n          arc = d3.arc().outerRadius(that.chartConfig.outerRadius[i]).innerRadius(that.chartConfig.innerRadius[i]).startAngle(0).endAngle(value.proportions[i] * 2 * Math.PI);\n          const outArc = view.append('path').attr('d', arc);\n          outArc.attr('fill', that.chartConfig.ringColor[i]);\n        }\n      }\n    },\n    getCircleData(file) {\n      const key = Object.keys(file);\n      const keys = Object.keys(file[key[0]]);\n      const ringData = [];\n      for (let i = 0; i < this.chartValue.k; i++) {\n        const proportion = [];\n        let temp = 0;\n        for (let j = 2; file[key[0]][keys[i]][j] !== undefined; j++) {\n          proportion.push(file[key[0]][keys[i]][j]);\n          temp = j - 1;\n        }\n        ringData.push({\n          proportionLength: temp,\n          leftCircle: file[key[0]][keys[i]][0],\n          rightCircle: file[key[0]][keys[i]][1],\n          proportions: proportion\n        });\n      }\n      return ringData;\n    }\n  },\n  mounted() {\n    this.creatRingChart(3);\n  }\n};","map":{"version":3,"names":["d3","circleJson2","circleJson3","circleJson4","circleJson5","name","data","chartValue","k","chartConfig","ringColor","circleColor","arcColor","outerRadius","innerRadius","circleRadius","arcRadius","methods","creatRingChart","idx","that","fileName","ringData","getCircleData","main","select","append","classed","attr","views","selectAll","enter","d","i","value","view","circle","innerArcRight","arcsRight","arc","startAngle","Math","PI","endAngle","rightCircle","arcRight","innerArcLeft","arcsLeft","leftCircle","arcLeft","arcs","proportions","proportionLength","outArc","file","key","Object","keys","proportion","temp","j","undefined","push","mounted"],"sources":["/Users/younggaming/Documents/GitHub/YbcCompletionProject/frontEnd/src/components/view33.vue"],"sourcesContent":["<template>\n  <div class=\"container33\">\n    <svg width=\"100%\" height=\"100%\"></svg>\n  </div>\n  <button @click=\"creatRingChart(2)\">circul_2</button>\n  <button @click=\"creatRingChart(3)\">circul_3</button>\n  <button @click=\"creatRingChart(4)\">circul_4</button>\n  <button @click=\"creatRingChart(5)\">circul_5</button>\n</template>\n\n<script>\nimport * as d3 from 'd3'\nimport circleJson2 from '../../../backEnd/data/circul_2.json'\nimport circleJson3 from '../../../backEnd/data/circul_3.json'\nimport circleJson4 from '../../../backEnd/data/circul_4.json'\nimport circleJson5 from '../../../backEnd/data/circul_5.json'\n\nexport default {\n  name: 'view3_3',\n  data () {\n    return {\n      chartValue: {\n        k: 5\n      },\n      chartConfig: {\n        ringColor: ['#2ca25f', '#fdae6b', '#3182bd', '#756bb1', '#636363', '#f03b20'],\n        circleColor: '#99ccff',\n        arcColor: 'blue',\n        outerRadius: [40, 50, 60, 70, 80, 90],\n        innerRadius: [35, 45, 55, 65, 75, 85],\n        circleRadius: 30,\n        arcRadius: 22\n      }\n    }\n  },\n  methods: {\n    creatRingChart (idx) {\n      const that = this\n      let fileName\n      switch (idx) {\n        case 2: {\n          fileName = circleJson2\n          break\n        }\n        case 3: {\n          fileName = circleJson3\n          break\n        }\n        case 4: {\n          fileName = circleJson4\n          break\n        }\n        case 5: {\n          fileName = circleJson5\n          break\n        }\n      }\n      const ringData = that.getCircleData(fileName)\n      const main = d3.select('.container33 svg')\n        .append('g')\n        .classed('main', true)\n        .attr('transform', 'translate(' + 100 + ',' + 100 + ')')\n      const views = main.append('g')\n        .classed('views', true)\n      views.selectAll('g')\n        .data(ringData)\n        .enter()\n        .append('g')\n        .attr('class', function (d, i) {\n          return 'view' + (i + 1)\n        })\n      for (let k = 0; k < 5; k++) {\n        // 5将来合图的时候要换\n        const value = ringData[k]\n        let view = views.select('.view' + (k + 1))\n        view = main.append('g').attr('transform', 'translate(' + 0 + ',' + 150 * k + ')')\n        const circle = view.append('circle')\n        circle.attr('cx', 0)\n          .attr('cy', 0)\n          .attr('r', that.chartConfig.circleRadius)\n          .attr('fill', that.chartConfig.circleColor)\n        // 设置扇形原点位置,本质是将画笔g移到该有的位置\n        const innerArcRight = view.append('g').attr('transform', 'translate(' + 2 + ',' + 0 + ')')\n        const arcsRight = d3.arc()\n          .outerRadius(that.chartConfig.arcRadius)\n          .innerRadius(0)\n          .startAngle(Math.PI)\n          .endAngle(Math.PI * (1 - value.rightCircle))\n        const arcRight = innerArcRight.append('path')\n          .attr('d', arcsRight)\n        arcRight.attr('fill', that.chartConfig.arcColor)\n        const innerArcLeft = view.append('g').attr('transform', 'translate(' + -2 + ',' + 0 + ')')\n        const arcsLeft = d3.arc()\n          .outerRadius(that.chartConfig.arcRadius)\n          .innerRadius(0)\n          .startAngle(Math.PI)\n          .endAngle(Math.PI * (value.leftCircle + 1))\n        const arcLeft = innerArcLeft.append('path')\n          .attr('d', arcsLeft)\n        arcLeft.attr('fill', 'blue')\n        const arcs = view.append('g')\n          .classed('arcs', true)\n        arcs.selectAll('g')\n          .data(value.proportions)\n          .enter()\n          .append('g')\n          .attr('class', function (d, i) {\n            return 'arc' + (i + 1)\n          })\n        for (let i = 0; i < value.proportionLength; i++) {\n          let arc = arcs.select('.arc' + (i + 1))\n          arc = d3.arc()\n            .outerRadius(that.chartConfig.outerRadius[i])\n            .innerRadius(that.chartConfig.innerRadius[i])\n            .startAngle(0)\n            .endAngle(value.proportions[i] * 2 * Math.PI)\n          const outArc = view.append('path')\n            .attr('d', arc)\n          outArc.attr('fill', that.chartConfig.ringColor[i])\n        }\n      }\n    },\n    getCircleData (file) {\n      const key = Object.keys(file)\n      const keys = Object.keys(file[key[0]])\n      const ringData = []\n      for (let i = 0; i < this.chartValue.k; i++) {\n        const proportion = []\n        let temp = 0\n        for (let j = 2; file[key[0]][keys[i]][j] !== undefined; j++) {\n          proportion.push(file[key[0]][keys[i]][j])\n          temp = j - 1\n        }\n        ringData.push({\n          proportionLength: temp,\n          leftCircle: file[key[0]][keys[i]][0],\n          rightCircle: file[key[0]][keys[i]][1],\n          proportions: proportion\n        })\n      }\n      return ringData\n    }\n  },\n  mounted () {\n    this.creatRingChart(3)\n  }\n}\n</script>\n\n<style scoped>\n\n.container33 {\n  width: 1000px;\n  height: 1200px;\n  /*border: 2px solid black;*/\n}\n\n</style>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}
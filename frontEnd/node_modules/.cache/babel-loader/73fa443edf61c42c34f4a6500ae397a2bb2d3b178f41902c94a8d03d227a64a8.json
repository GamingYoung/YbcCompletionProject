{"ast":null,"code":"import { createElementVNode as _createElementVNode, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-681ae956\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"container33\"\n}, [/*#__PURE__*/_createElementVNode(\"svg\", {\n  width: \"100%\",\n  height: \"100%\"\n})], -1 /* HOISTED */));\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(_Fragment, null, [_hoisted_1, _createElementVNode(\"button\", {\n    onClick: _cache[0] || (_cache[0] = $event => $options.creatRingChart(2))\n  }, \"circul_2\"), _createElementVNode(\"button\", {\n    onClick: _cache[1] || (_cache[1] = $event => $options.creatRingChart(3))\n  }, \"circul_3\")], 64 /* STABLE_FRAGMENT */);\n}","map":{"version":3,"names":["_createElementVNode","class","width","height","_hoisted_1","onClick","_cache","$event","$options","creatRingChart"],"sources":["/Users/younggaming/Documents/GitHub/YbcCompletionProject/frontEnd/src/components/view33.vue"],"sourcesContent":["<template>\n  <div class=\"container33\">\n    <svg width=\"100%\" height=\"100%\"></svg>\n  </div>\n  <button @click=\"creatRingChart(2)\">circul_2</button>\n  <button @click=\"creatRingChart(3)\">circul_3</button>\n</template>\n\n<script>\nimport * as d3 from 'd3'\nimport circleJson2 from '../../../backEnd/data/circul_2.json'\nimport circleJson3 from '../../../backEnd/data/circul_3.json'\nimport circleJson4 from '../../../backEnd/data/circul_4.json'\n\nexport default {\n  name: 'view3_3',\n  data () {\n    return {\n      chartValue: {\n        k: 5\n      },\n      chartConfig: {\n        ringColor: ['#2ca25f', '#fdae6b', '#3182bd', '#756bb1', '#636363', '#f03b20'],\n        circleColor: '#99ccff',\n        arcColor: 'blue',\n        outerRadius: [40, 50, 60, 70, 80, 90],\n        innerRadius: [35, 45, 55, 65, 75, 85],\n        circleRadius: 30,\n        arcRadius: 22\n      }\n    }\n  },\n  methods: {\n    creatRingChart (idx) {\n      const that = this\n      let fileName\n      switch (idx) {\n        case 2: {\n          fileName = circleJson2\n          break\n        }\n        case 3: {\n          fileName = circleJson3\n          break\n        }\n        case 4: {\n          fileName = circleJson4\n          break\n        }\n      }\n      const ringData = that.getCircleData(fileName)\n      const main = d3.select('.container33 svg')\n        .append('g')\n        .classed('main', true)\n        .attr('transform', 'translate(' + 200 + ',' + 200 + ')')\n      const views = main.append('g')\n        .classed('views', true)\n      views.selectAll('g')\n        .data(ringData)\n        .enter()\n        .append('g')\n        .attr('class', function (d, i) {\n          return 'view' + (i + 1)\n        })\n      for (let k = 0; k < 5; k++) {\n        // 5将来合图的时候要换\n        const value = ringData[k]\n        let view = views.select('.view' + (k + 1))\n        view = main.append('g').attr('transform', 'translate(' + 0 + ',' + 150 * k + ')')\n        const circle = view.append('circle')\n        circle.attr('cx', 0)\n          .attr('cy', 0)\n          .attr('r', that.chartConfig.circleRadius)\n          .attr('fill', that.chartConfig.circleColor)\n        // 设置扇形原点位置,本质是将画笔g移到该有的位置\n        const innerArcRight = view.append('g').attr('transform', 'translate(' + 2 + ',' + 0 + ')')\n        const arcsRight = d3.arc()\n          .outerRadius(that.chartConfig.arcRadius)\n          .innerRadius(0)\n          .startAngle(Math.PI)\n          .endAngle(Math.PI * (1 - value.rightCircle))\n        const arcRight = innerArcRight.append('path')\n          .attr('d', arcsRight)\n        arcRight.attr('fill', that.chartConfig.arcColor)\n        const innerArcLeft = view.append('g').attr('transform', 'translate(' + -2 + ',' + 0 + ')')\n        const arcsLeft = d3.arc()\n          .outerRadius(that.chartConfig.arcRadius)\n          .innerRadius(0)\n          .startAngle(Math.PI)\n          .endAngle(Math.PI * (value.leftCircle + 1))\n        const arcLeft = innerArcLeft.append('path')\n          .attr('d', arcsLeft)\n        arcLeft.attr('fill', 'blue')\n        const arcs = view.append('g')\n          .classed('arcs', true)\n        arcs.selectAll('g')\n          .data(value.proportions)\n          .enter()\n          .append('g')\n          .attr('class', function (d, i) {\n            return 'arc' + (i + 1)\n          })\n        for (let i = 0; i < value.proportionLength; i++) {\n          let arc = arcs.select('.arc' + (i + 1))\n          arc = d3.arc()\n            .outerRadius(that.chartConfig.outerRadius[i])\n            .innerRadius(that.chartConfig.innerRadius[i])\n            .startAngle(0)\n            .endAngle(value.proportions[i] * 2 * Math.PI)\n          const outArc = view.append('path')\n            .attr('d', arc)\n          outArc.attr('fill', that.chartConfig.ringColor[i])\n        }\n      }\n    },\n    getCircleData (file) {\n      const key = Object.keys(file)\n      const keys = Object.keys(file[key[0]])\n      const ringData = []\n      for (let i = 0; i < this.chartValue.k; i++) {\n        const proportion = []\n        let temp = 0\n        for (let j = 2; file[key[0]][keys[i]][j] !== undefined; j++) {\n          proportion.push(file[key[0]][keys[i]][j])\n          temp = j - 1\n        }\n        ringData.push({\n          proportionLength: temp,\n          leftCircle: file[key[0]][keys[i]][0],\n          rightCircle: file[key[0]][keys[i]][1],\n          proportions: proportion\n        })\n      }\n      return ringData\n    }\n  },\n  mounted () {\n    this.creatRingChart(3)\n  }\n}\n</script>\n\n<style scoped>\n\n.container33 {\n  width: 1000px;\n  height: 1200px;\n  border: 2px solid black;\n}\n\n</style>\n"],"mappings":";;gEACEA,mBAAA,CAEM;EAFDC,KAAK,EAAC;AAAa,I,aACtBD,mBAAA,CAAsC;EAAjCE,KAAK,EAAC,MAAM;EAACC,MAAM,EAAC;;;;6DAD3BC,UAEM,EACNJ,mBAAA,CAAoD;IAA3CK,OAAK,EAAAC,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAAEC,QAAA,CAAAC,cAAc;KAAK,UAAQ,GAC3CT,mBAAA,CAAoD;IAA3CK,OAAK,EAAAC,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAAEC,QAAA,CAAAC,cAAc;KAAK,UAAQ,E"},"metadata":{},"sourceType":"module","externalDependencies":[]}